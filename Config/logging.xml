<?xml version="1.0" encoding="utf-8" ?>
<log4net>
  <appender name="MultiFileAppender" type="Hamster.Log.MultiplexFileAppender">
    <filePattern value="./Log/%date{yyyy-MM-dd}/%logger.log" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date %-5level %logger - %message%newline%exception" />
    </layout>
  </appender>

  <appender name="NHibernateFileAppender" type="Hamster.Log.MultiplexFileAppender">
    <filePattern value="./Log/%date{yyyy-MM-dd}/NHibernate.log" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date %-5level %logger - %message%newline" />
    </layout>
  </appender>

  <appender name="ManagerAppender" type="Hamster.Log.LoggerManagerAppender">
  </appender>

  <appender name="NHibernateManagerAppender" type="log4net.Appender.ForwardingAppender" >
    <threshold value="WARN"/>
    <appender-ref ref="ManagerAppender" />
  </appender>

  <root>
    <level value="DEBUG" />
    <appender-ref ref="MultiFileAppender" />
    <appender-ref ref="ManagerAppender" />
  </root>

  <logger name="NHibernate" additivity="false">
    <level value="WARN" />
    <appender-ref ref="NHibernateFileAppender" />
    <appender-ref ref="NHibernateManagerAppender" />
  </logger>
</log4net>
